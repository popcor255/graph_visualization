var htmlCanvas,ctx,win_l,win_h,size,vectors;function main(){htmlCanvas=document.getElementById("myCanvas"),ctx=htmlCanvas.getContext("2d"),vectors=[],win_l=window.innerWidth,win_h=window.innerHeight,size=Math.min(win_h,win_l),ctx.canvas.width=size,ctx.canvas.height=size,htmlCanvas.addEventListener("mousedown",function(t){1===t.which&&ctxEvent()},!1),htmlCanvas.addEventListener("wheel",function(t){scrollEvent(t.deltaY)})}function ctxEvent(){nodeEventHandler(htmlCanvas.relMouseCoords(event),size/60,!1,null)}function scrollEvent(t){for(var e=0;e<vectors.length;e++)temp=vectors[e],vectors[e].clearRegion(),vectors[e]=new Node(temp.x,temp.y,temp.r,"white",1),vectors[e].draw()}function nodeEventHandler(t,e,n,o){if(t.x>e&&t.x<size-e&&t.y>e&&t.y<size-e){for(var i=0;i<vectors.length;i++)null!=(o=vectors[i])&&o.isClicked(t.x,t.y)&&(o.clearRegion(),vectors.splice(i,1),n=!0);0==n&&((o=new Node(t.x,t.y,e,"white",1)).isCollision(vectors)||vectors.push(o))}0<vectors.length&&((o=vectors[0]).clearRegion(),vectors[0]=new Node(o.x,o.y,o.r,"blue",1),vectors[0].draw());for(i=1;i<vectors.length-1;i++)o=vectors[i],vectors[i].clearRegion(),vectors[i]=new Node(o.x,o.y,o.r,"white",1),vectors[i].draw();1<vectors.length&&((o=vectors[vectors.length-1]).clearRegion(),vectors[vectors.length-1]=new Node(o.x,o.y,o.r,"red",1),vectors[vectors.length-1].draw())}function Edge(t,e){this.head=t,this.tail=e,this.draw=function(){ctx.beginPath(),ctx.globalCompositeOperation="destination-over",ctx.moveTo(t.x,t.y),ctx.lineTo(e.x,e.y),ctx.stroke(),ctx.globalCompositeOperation="source-over"}}function Node(s,r,o,t,e){this.startingAngle=0,this.endAngle=2*Math.PI,this.x=s,this.y=r,this.r=o,this.region=2.2*o,this.fill=t,this.stroke=e,this.draw=function(){ctx.beginPath(),ctx.arc(this.x,this.y,this.r,this.startingAngle,this.endAngle),ctx.fillStyle=this.fill,ctx.lineWidth=3,ctx.fill(),ctx.strokeStyle=this.stroke,ctx.stroke()},this.clearRegion=function(){ctx.clearRect(this.x-this.region/2,this.y-this.region/2,this.region,this.region)},this.isClicked=function(t,e){var n=!1;return s-o<t&&t<s+o&&r-o<e&&e<r+o&&(n=!0),n},this.isCollision=function(t){for(var e=!1,n=0;n<t.length;n++)if(null!=t[n]){var o=t[n].x,i=t[n].y;o>s-this.region&&o<s+this.region&&i>r-this.region&&i<r+this.region&&(e=!0)}return e}}function relMouseCoords(t){for(var e=0,n=0,o=this;e+=o.offsetLeft-o.scrollLeft,n+=o.offsetTop-o.scrollTop,o=o.offsetParent;);return{x:t.pageX-e,y:t.pageY-n}}HTMLCanvasElement.prototype.relMouseCoords=relMouseCoords,CanvasRenderingContext2D.prototype.clear=function(){ctx.clearRect(0,0,size,size),vectors=[]};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaHRtbENhbnZhcyIsImN0eCIsIndpbl9sIiwid2luX2giLCJzaXplIiwidmVjdG9ycyIsIm1haW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIk1hdGgiLCJtaW4iLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsIndoaWNoIiwiY3R4RXZlbnQiLCJzY3JvbGxFdmVudCIsImRlbHRhWSIsIm5vZGVFdmVudEhhbmRsZXIiLCJyZWxNb3VzZUNvb3JkcyIsImV2ZW50IiwieSIsImkiLCJsZW5ndGgiLCJ0ZW1wIiwiY2xlYXJSZWdpb24iLCJOb2RlIiwieCIsInIiLCJkcmF3IiwiY29vcmRzIiwicmFkaXVzIiwicmVtb3ZlZCIsImlzQ2xpY2tlZCIsInNwbGljZSIsImlzQ29sbGlzaW9uIiwicHVzaCIsIkVkZ2UiLCJoZWFkIiwidGFpbCIsInRoaXMiLCJiZWdpblBhdGgiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJmaWxsIiwic3RhcnRpbmdBbmdsZSIsImVuZEFuZ2xlIiwiUEkiLCJyZWdpb24iLCJhcmMiLCJmaWxsU3R5bGUiLCJsaW5lV2lkdGgiLCJzdHJva2VTdHlsZSIsImNsZWFyUmVjdCIsImluX3giLCJpbl95IiwiY2xpY2tlZCIsImFyciIsInRvdGFsT2Zmc2V0WCIsInRvdGFsT2Zmc2V0WSIsImN1cnJlbnRFbGVtZW50Iiwib2Zmc2V0TGVmdCIsInNjcm9sbExlZnQiLCJvZmZzZXRUb3AiLCJzY3JvbGxUb3AiLCJvZmZzZXRQYXJlbnQiLCJwYWdlWCIsInBhZ2VZIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJwcm90b3R5cGUiLCJDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiLCJjbGVhciJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsV0FDQUMsSUFDQUMsTUFDQUMsTUFDQUMsS0FDQUMsUUFFSixTQUFTQyxPQUNMTixXQUFhTyxTQUFTQyxlQUFlLFlBQ3JDUCxJQUFNRCxXQUFXUyxXQUFXLE1BQzVCSixRQUFVLEdBQ1ZILE1BQVFRLE9BQU9DLFdBQ2ZSLE1BQVFPLE9BQU9FLFlBQ2ZSLEtBQU9TLEtBQUtDLElBQUlYLE1BQU9ELE9BRXZCRCxJQUFJYyxPQUFPQyxNQUFTWixLQUNwQkgsSUFBSWMsT0FBT0UsT0FBU2IsS0FFcEJKLFdBQVdrQixpQkFBaUIsWUFBYyxTQUFTQyxHQUM5QixJQUFiQSxFQUFHQyxPQUNIQyxhQUVMLEdBR0hyQixXQUFXa0IsaUJBQWlCLFFBQVMsU0FBU0MsR0FDMUNHLFlBQVlILEVBQUdJLFVBSXZCLFNBQVNGLFdBTUxHLGlCQUxheEIsV0FBV3lCLGVBQWVDLE9BQzFCdEIsS0FBTyxJQUNOLEVBQ0gsTUFNZixTQUFTa0IsWUFBWUssR0FDakIsSUFBSSxJQUFJQyxFQUFJLEVBQUdBLEVBQUl2QixRQUFRd0IsT0FBUUQsSUFDL0JFLEtBQU96QixRQUFRdUIsR0FDZnZCLFFBQVF1QixHQUFHRyxjQUNYMUIsUUFBUXVCLEdBQUssSUFBSUksS0FBS0YsS0FBS0csRUFBR0gsS0FBS0gsRUFBR0csS0FBS0ksRUFBRyxRQUFTLEdBQ3ZEN0IsUUFBUXVCLEdBQUdPLE9BSW5CLFNBQVNYLGlCQUFpQlksRUFBUUMsRUFBUUMsRUFBU1IsR0FPL0MsR0FBR00sRUFBT0gsRUFBSUksR0FBVUQsRUFBT0gsRUFBSTdCLEtBQU9pQyxHQUNuQ0QsRUFBT1QsRUFBSVUsR0FBVUQsRUFBT1QsRUFBSXZCLEtBQU9pQyxFQUFPLENBQzdDLElBQUksSUFBSVQsRUFBSSxFQUFHQSxFQUFJdkIsUUFBUXdCLE9BQVFELElBRXBCLE9BRFhFLEVBQU96QixRQUFRdUIsS0FDSUUsRUFBS1MsVUFBVUgsRUFBT0gsRUFBR0csRUFBT1QsS0FDL0NHLEVBQUtDLGNBQ0wxQixRQUFRbUMsT0FBT1osRUFBRyxHQUNsQlUsR0FBVSxHQUlKLEdBQVhBLEtBQ0NSLEVBQU8sSUFBSUUsS0FBS0ksRUFBT0gsRUFBR0csRUFBT1QsRUFBR1UsRUFBUSxRQUFTLElBQzVDSSxZQUFZcEMsVUFDakJBLFFBQVFxQyxLQUFLWixJQVdULEVBQWpCekIsUUFBUXdCLFVBQ1BDLEVBQU96QixRQUFRLElBQ1YwQixjQUNMMUIsUUFBUSxHQUFLLElBQUkyQixLQUFLRixFQUFLRyxFQUFHSCxFQUFLSCxFQUFHRyxFQUFLSSxFQUFHLE9BQVEsR0FDdEQ3QixRQUFRLEdBQUc4QixRQUdmLElBQVFQLEVBQUksRUFBR0EsRUFBSXZCLFFBQVF3QixPQUFTLEVBQUdELElBQ25DRSxFQUFPekIsUUFBUXVCLEdBQ2Z2QixRQUFRdUIsR0FBR0csY0FDWDFCLFFBQVF1QixHQUFLLElBQUlJLEtBQUtGLEVBQUtHLEVBQUdILEVBQUtILEVBQUdHLEVBQUtJLEVBQUcsUUFBUyxHQUN2RDdCLFFBQVF1QixHQUFHTyxPQUdLLEVBQWpCOUIsUUFBUXdCLFVBQ1BDLEVBQU96QixRQUFRQSxRQUFRd0IsT0FBUyxJQUMzQkUsY0FDTDFCLFFBQVFBLFFBQVF3QixPQUFTLEdBQUssSUFBSUcsS0FBS0YsRUFBS0csRUFBR0gsRUFBS0gsRUFBR0csRUFBS0ksRUFBRyxNQUFPLEdBQ3RFN0IsUUFBUUEsUUFBUXdCLE9BQVMsR0FBR00sUUFLcEMsU0FBU1EsS0FBS0MsRUFBTUMsR0FDaEJDLEtBQUtGLEtBQU9BLEVBQ1pFLEtBQUtELEtBQU9BLEVBRVpDLEtBQUtYLEtBQU8sV0FDUmxDLElBQUk4QyxZQUNKOUMsSUFBSStDLHlCQUEyQixtQkFDL0IvQyxJQUFJZ0QsT0FBT0wsRUFBS1gsRUFBR1csRUFBS2pCLEdBQ3hCMUIsSUFBSWlELE9BQU9MLEVBQUtaLEVBQUdZLEVBQUtsQixHQUN4QjFCLElBQUlrRCxTQUNKbEQsSUFBSStDLHlCQUEyQixlQUl2QyxTQUFTaEIsS0FBS0MsRUFBR04sRUFBR08sRUFBR2tCLEVBQU1ELEdBQ3pCTCxLQUFLTyxjQUFnQixFQUNyQlAsS0FBS1EsU0FBVyxFQUFJekMsS0FBSzBDLEdBQ3pCVCxLQUFLYixFQUFJQSxFQUNUYSxLQUFLbkIsRUFBSUEsRUFDVG1CLEtBQUtaLEVBQUlBLEVBQ1RZLEtBQUtVLE9BQWEsSUFBSnRCLEVBRWRZLEtBQUtNLEtBQU9BLEVBQ1pOLEtBQUtLLE9BQVNBLEVBRWRMLEtBQUtYLEtBQU8sV0FDUmxDLElBQUk4QyxZQUNKOUMsSUFBSXdELElBQUlYLEtBQUtiLEVBQUdhLEtBQUtuQixFQUFHbUIsS0FBS1osRUFBR1ksS0FBS08sY0FBZVAsS0FBS1EsVUFDekRyRCxJQUFJeUQsVUFBWVosS0FBS00sS0FDckJuRCxJQUFJMEQsVUFBWSxFQUNoQjFELElBQUltRCxPQUNKbkQsSUFBSTJELFlBQWNkLEtBQUtLLE9BQ3ZCbEQsSUFBSWtELFVBR1JMLEtBQUtmLFlBQWMsV0FDZjlCLElBQUk0RCxVQUFVZixLQUFLYixFQUFLYSxLQUFLVSxPQUFTLEVBQUlWLEtBQUtuQixFQUFLbUIsS0FBS1UsT0FBUyxFQUFJVixLQUFLVSxPQUFRVixLQUFLVSxTQUc1RlYsS0FBS1AsVUFBWSxTQUFVdUIsRUFBTUMsR0FDN0IsSUFBSUMsR0FBVSxFQVFkLE9BTlcvQixFQUFJQyxFQUFaNEIsR0FBa0JBLEVBQVE3QixFQUFJQyxHQUNsQlAsRUFBSU8sRUFBWjZCLEdBQWtCQSxFQUFRcEMsRUFBSU8sSUFDN0I4QixHQUFVLEdBSVhBLEdBR1hsQixLQUFLTCxZQUFjLFNBQVN3QixHQUd4QixJQUZBLElBQUlELEdBQVUsRUFFTnBDLEVBQUksRUFBR0EsRUFBSXFDLEVBQUlwQyxPQUFRRCxJQUMzQixHQUFhLE1BQVZxQyxFQUFJckMsR0FBVyxDQUNkLElBQUlrQyxFQUFPRyxFQUFJckMsR0FBR0ssRUFDZDhCLEVBQU9FLEVBQUlyQyxHQUFHRCxFQUVmbUMsRUFBUTdCLEVBQUlhLEtBQUtVLFFBQVdNLEVBQVE3QixFQUFJYSxLQUFLVSxRQUN6Q08sRUFBUXBDLEVBQUltQixLQUFLVSxRQUFXTyxFQUFRcEMsRUFBSW1CLEtBQUtVLFNBQzVDUSxHQUFVLEdBTTFCLE9BQU9BLEdBS2YsU0FBU3ZDLGVBQWVDLEdBT3BCLElBTkEsSUFBSXdDLEVBQWUsRUFDZkMsRUFBZSxFQUdmQyxFQUFpQnRCLEtBR2pCb0IsR0FBZ0JFLEVBQWVDLFdBQWFELEVBQWVFLFdBQzNESCxHQUFnQkMsRUFBZUcsVUFBWUgsRUFBZUksVUFFeERKLEVBQWlCQSxFQUFlSyxlQUt0QyxNQUFPLENBQUN4QyxFQUhFUCxFQUFNZ0QsTUFBUVIsRUFHTHZDLEVBRlRELEVBQU1pRCxNQUFRUixHQUk1QlMsa0JBQWtCQyxVQUFVcEQsZUFBaUJBLGVBRTdDcUQseUJBQXlCRCxVQUFVRSxNQUFRLFdBQ3ZDOUUsSUFBSTRELFVBQVUsRUFBRSxFQUFFekQsS0FBS0EsTUFDdkJDLFFBQVUiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGh0bWxDYW52YXM7XG52YXIgY3R4O1xudmFyIHdpbl9sO1xudmFyIHdpbl9oO1xudmFyIHNpemU7XG52YXIgdmVjdG9ycztcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgICBodG1sQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUNhbnZhc1wiKTtcbiAgICBjdHggPSBodG1sQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdmVjdG9ycyA9IFtdO1xuICAgIHdpbl9sID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgd2luX2ggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgc2l6ZSA9IE1hdGgubWluKHdpbl9oLCB3aW5fbCk7XG5cbiAgICBjdHguY2FudmFzLndpZHRoICA9IHNpemU7XG4gICAgY3R4LmNhbnZhcy5oZWlnaHQgPSBzaXplO1xuXG4gICAgaHRtbENhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICBmdW5jdGlvbihldikge1xuICAgICAgICBpZiAoZXYud2hpY2ggPT09IDEpIHtcbiAgICAgICAgICAgIGN0eEV2ZW50KCk7XG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cblxuICAgIGh0bWxDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBmdW5jdGlvbihldikge1xuICAgICAgICBzY3JvbGxFdmVudChldi5kZWx0YVkpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjdHhFdmVudCgpe1xuICAgIHZhciBjb29yZHMgPSBodG1sQ2FudmFzLnJlbE1vdXNlQ29vcmRzKGV2ZW50KTtcbiAgICB2YXIgcmFkaXVzID0gc2l6ZSAvIDYwO1xuICAgIHZhciByZW1vdmVkID0gZmFsc2U7XG4gICAgdmFyIHRlbXAgPSBudWxsO1xuXG4gICAgbm9kZUV2ZW50SGFuZGxlcihjb29yZHMsIHJhZGl1cywgcmVtb3ZlZCwgdGVtcCk7XG4gICAgXG59XG5cbmZ1bmN0aW9uIHNjcm9sbEV2ZW50KHkpe1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB2ZWN0b3JzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbaV07XG4gICAgICAgIHZlY3RvcnNbaV0uY2xlYXJSZWdpb24oKTtcbiAgICAgICAgdmVjdG9yc1tpXSA9IG5ldyBOb2RlKHRlbXAueCwgdGVtcC55LCB0ZW1wLnIsICd3aGl0ZScsIDEpO1xuICAgICAgICB2ZWN0b3JzW2ldLmRyYXcoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vZGVFdmVudEhhbmRsZXIoY29vcmRzLCByYWRpdXMsIHJlbW92ZWQsIHRlbXApe1xuXG4gICAgLy9UaGUgY29uZGl0aW9ucyBnbyBhcyBmb2xsb3dzOlxuICAgIC8vMSkgVGhlIGNpcmNsZSBtdXN0IGZpdCBpbiB0aGUgY2FudmFzIChsaW5lcyA0Mi00MylcbiAgICAvLzIpIFRoZSBjaXJjbGUgbXVzdCBub3Qgb3ZlcmxhcCAobGluZXMgNDcpXG4gICAgLy8zKSBJZiB0aGUgY2lyY2xlIGlzIGFscmVhZHkgcHJlc2VudCBkbyBub3QgYWRkLCBidXQgcmVtb3ZlXG5cbiAgICBpZihjb29yZHMueCA+IHJhZGl1cyAmJiBjb29yZHMueCA8IHNpemUgLSByYWRpdXMpe1xuICAgICAgICBpZihjb29yZHMueSA+IHJhZGl1cyAmJiBjb29yZHMueSA8IHNpemUgLSByYWRpdXMpe1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHZlY3RvcnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIHRlbXAgPSB2ZWN0b3JzW2ldO1xuICAgICAgICAgICAgICAgIGlmKHRlbXAgIT0gbnVsbCAmJiB0ZW1wLmlzQ2xpY2tlZChjb29yZHMueCwgY29vcmRzLnkpKXtcbiAgICAgICAgICAgICAgICAgICAgdGVtcC5jbGVhclJlZ2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB2ZWN0b3JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihyZW1vdmVkID09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICB0ZW1wID0gbmV3IE5vZGUoY29vcmRzLngsIGNvb3Jkcy55LCByYWRpdXMsICd3aGl0ZScsIDEpO1xuICAgICAgICAgICAgICAgIGlmKCF0ZW1wLmlzQ29sbGlzaW9uKHZlY3RvcnMpKXtcbiAgICAgICAgICAgICAgICAgICAgdmVjdG9ycy5wdXNoKHRlbXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vcmVkcmF3IG5vZGVzIGFzIGZvbGxvd3NcbiAgICAvL2lmIHRoZSBoZWFkIHlvdXIgYmx1ZVxuICAgIC8vaWYgdGhlIHRhaWwgeW91ciByZWRcbiAgICAvL2Vsc2UgeW91ciBncmVlblxuXG4gICAgaWYodmVjdG9ycy5sZW5ndGggPiAwKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbMF07XG4gICAgICAgIHRlbXAuY2xlYXJSZWdpb24oKTtcbiAgICAgICAgdmVjdG9yc1swXSA9IG5ldyBOb2RlKHRlbXAueCwgdGVtcC55LCB0ZW1wLnIsICdibHVlJywgMSk7XG4gICAgICAgIHZlY3RvcnNbMF0uZHJhdygpO1xuICAgIH1cblxuICAgIGZvcih2YXIgaSA9IDE7IGkgPCB2ZWN0b3JzLmxlbmd0aCAtIDE7IGkrKyl7XG4gICAgICAgIHRlbXAgPSB2ZWN0b3JzW2ldO1xuICAgICAgICB2ZWN0b3JzW2ldLmNsZWFyUmVnaW9uKCk7XG4gICAgICAgIHZlY3RvcnNbaV0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgdGVtcC5yLCAnd2hpdGUnLCAxKTtcbiAgICAgICAgdmVjdG9yc1tpXS5kcmF3KCk7XG4gICAgfVxuXG4gICAgaWYodmVjdG9ycy5sZW5ndGggPiAxKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbdmVjdG9ycy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGVtcC5jbGVhclJlZ2lvbigpO1xuICAgICAgICB2ZWN0b3JzW3ZlY3RvcnMubGVuZ3RoIC0gMV0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgdGVtcC5yLCAncmVkJywgMSk7XG4gICAgICAgIHZlY3RvcnNbdmVjdG9ycy5sZW5ndGggLSAxXS5kcmF3KCk7XG4gICAgfVxuICAgIFxufVxuXG5mdW5jdGlvbiBFZGdlKGhlYWQsIHRhaWwpe1xuICAgIHRoaXMuaGVhZCA9IGhlYWQ7XG4gICAgdGhpcy50YWlsID0gdGFpbDtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdmVyJztcbiAgICAgICAgY3R4Lm1vdmVUbyhoZWFkLngsIGhlYWQueSk7XG4gICAgICAgIGN0eC5saW5lVG8odGFpbC54LCB0YWlsLnkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTm9kZSh4LCB5LCByLCBmaWxsLCBzdHJva2UpIHtcbiAgICB0aGlzLnN0YXJ0aW5nQW5nbGUgPSAwO1xuICAgIHRoaXMuZW5kQW5nbGUgPSAyICogTWF0aC5QSTtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5yID0gcjtcbiAgICB0aGlzLnJlZ2lvbiA9IHIgKiAyLjI7XG5cbiAgICB0aGlzLmZpbGwgPSBmaWxsO1xuICAgIHRoaXMuc3Ryb2tlID0gc3Ryb2tlO1xuXG4gICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5hcmModGhpcy54LCB0aGlzLnksIHRoaXMuciwgdGhpcy5zdGFydGluZ0FuZ2xlLCB0aGlzLmVuZEFuZ2xlKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuZmlsbDtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuc3Ryb2tlO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhclJlZ2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHguY2xlYXJSZWN0KHRoaXMueCAtICh0aGlzLnJlZ2lvbiAvIDIpLCB0aGlzLnkgLSAodGhpcy5yZWdpb24gLyAyKSwgdGhpcy5yZWdpb24sIHRoaXMucmVnaW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzQ2xpY2tlZCA9IGZ1bmN0aW9uIChpbl94LCBpbl95KSB7XG4gICAgICAgIHZhciBjbGlja2VkID0gZmFsc2U7XG5cbiAgICAgICAgaWYoaW5feCA+ICh4IC0gcikgJiYgaW5feCA8ICh4ICsgcikpe1xuICAgICAgICAgICAgaWYoaW5feSA+ICh5IC0gcikgJiYgaW5feSA8ICh5ICsgcikpe1xuICAgICAgICAgICAgICAgIGNsaWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsaWNrZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5pc0NvbGxpc2lvbiA9IGZ1bmN0aW9uKGFycil7XG4gICAgICAgIHZhciBjbGlja2VkID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGlmKGFycltpXSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICB2YXIgaW5feCA9IGFycltpXS54O1xuICAgICAgICAgICAgICAgIHZhciBpbl95ID0gYXJyW2ldLnk7XG5cbiAgICAgICAgICAgICAgICBpZihpbl94ID4gKHggLSB0aGlzLnJlZ2lvbikgJiYgaW5feCA8ICh4ICsgdGhpcy5yZWdpb24pKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5feSA+ICh5IC0gdGhpcy5yZWdpb24pICYmIGluX3kgPCAoeSArIHRoaXMucmVnaW9uKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGlja2VkO1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWxNb3VzZUNvb3JkcyhldmVudCl7XG4gICAgdmFyIHRvdGFsT2Zmc2V0WCA9IDA7XG4gICAgdmFyIHRvdGFsT2Zmc2V0WSA9IDA7XG4gICAgdmFyIGNhbnZhc1ggPSAwO1xuICAgIHZhciBjYW52YXNZID0gMDtcbiAgICB2YXIgY3VycmVudEVsZW1lbnQgPSB0aGlzO1xuXG4gICAgZG97XG4gICAgICAgIHRvdGFsT2Zmc2V0WCArPSBjdXJyZW50RWxlbWVudC5vZmZzZXRMZWZ0IC0gY3VycmVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICAgICAgdG90YWxPZmZzZXRZICs9IGN1cnJlbnRFbGVtZW50Lm9mZnNldFRvcCAtIGN1cnJlbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICB9XG4gICAgd2hpbGUoY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5vZmZzZXRQYXJlbnQpXG5cbiAgICBjYW52YXNYID0gZXZlbnQucGFnZVggLSB0b3RhbE9mZnNldFg7XG4gICAgY2FudmFzWSA9IGV2ZW50LnBhZ2VZIC0gdG90YWxPZmZzZXRZO1xuXG4gICAgcmV0dXJuIHt4OmNhbnZhc1gsIHk6Y2FudmFzWX1cbn1cbkhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS5yZWxNb3VzZUNvb3JkcyA9IHJlbE1vdXNlQ29vcmRzO1xuXG5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKXtcbiAgICBjdHguY2xlYXJSZWN0KDAsMCxzaXplLHNpemUpO1xuICAgIHZlY3RvcnMgPSBbXTtcbn0iXX0=
