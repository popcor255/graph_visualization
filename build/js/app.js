var htmlCanvas,ctx,win_l,win_h,size,radius,vectors;function main(){htmlCanvas=document.getElementById("myCanvas"),ctx=htmlCanvas.getContext("2d"),vectors=[],win_l=window.innerWidth,win_h=window.innerHeight,size=Math.min(win_h,win_l),radius=size/70,ctx.canvas.width=size,ctx.canvas.height=size,htmlCanvas.addEventListener("mousedown",function(t){1===t.which&&ctxEvent()},!1),htmlCanvas.addEventListener("wheel",function(t){scrollEvent(t)})}function ctxEvent(){nodeEventHandler(htmlCanvas.relMouseCoords(event),radius,!1,null)}function scrollEvent(t){var e=0,i=t.deltaY;0<vectors.length&&(i<0&&size/65<=radius&&(console.log("down"),e=-2),0<i&&radius<=size/60&&(console.log("up"),e=2)),radius+=e;for(var n=0;n<vectors.length;n++)temp=vectors[n],vectors[n].clearRegion(),vectors[n]=new Node(temp.x,temp.y,radius,temp.fill,1,n),vectors[n].draw()}function nodeEventHandler(t,e,i,n){if(t.x>e&&t.x<size-e&&t.y>e&&t.y<size-e){for(var o=0;o<vectors.length;o++)null!=(n=vectors[o])&&n.isClicked(t.x,t.y)&&(n.clearRegion(),vectors.splice(o,1),i=!0);0==i&&((n=new Node(t.x,t.y,e,"white",1,vectors.length-1)).isCollision(vectors)||vectors.push(n))}0<vectors.length&&((n=vectors[0]).clearRegion(),vectors[0]=new Node(n.x,n.y,n.r,"blue",1,0),vectors[0].draw());for(o=1;o<vectors.length-1;o++)n=vectors[o],vectors[o].clearRegion(),vectors[o]=new Node(n.x,n.y,n.r,"white",1,o),vectors[o].draw();1<vectors.length&&((n=vectors[vectors.length-1]).clearRegion(),vectors[vectors.length-1]=new Node(n.x,n.y,n.r,"red",1,vectors.length-1),vectors[vectors.length-1].draw())}function Edge(t,e){this.head=t,this.tail=e,this.draw=function(){ctx.beginPath(),ctx.globalCompositeOperation="destination-over",ctx.moveTo(t.x,t.y),ctx.lineTo(e.x,e.y),ctx.stroke(),ctx.globalCompositeOperation="source-over"}}function Node(s,r,n,t,e,i){this.startingAngle=0,this.endAngle=2*Math.PI,this.x=s,this.y=r,this.r=n,this.region=size/60*2.2,this.index=i,this.fill=t,this.stroke=e,this.draw=function(){ctx.beginPath(),ctx.arc(this.x,this.y,this.r,this.startingAngle,this.endAngle),ctx.fillStyle=this.fill,ctx.lineWidth=3,ctx.fill(),ctx.strokeStyle=this.stroke,ctx.stroke(),size/60<=n&&(ctx.font="8pt Calibri",ctx.fillStyle="black",ctx.textAlign="center",ctx.fillText(i,this.x,this.y+3))},this.clearRegion=function(){ctx.clearRect(this.x-this.region/2,this.y-this.region/2,this.region,this.region)},this.isClicked=function(t,e){var i=!1;return s-n<t&&t<s+n&&r-n<e&&e<r+n&&(i=!0),i},this.isCollision=function(t){for(var e=!1,i=0;i<t.length;i++)if(null!=t[i]){var n=t[i].x,o=t[i].y;n>s-this.region&&n<s+this.region&&o>r-this.region&&o<r+this.region&&(e=!0)}return e}}function relMouseCoords(t){for(var e=0,i=0,n=this;e+=n.offsetLeft-n.scrollLeft,i+=n.offsetTop-n.scrollTop,n=n.offsetParent;);return{x:t.pageX-e,y:t.pageY-i}}HTMLCanvasElement.prototype.relMouseCoords=relMouseCoords,CanvasRenderingContext2D.prototype.clear=function(){ctx.clearRect(0,0,size,size),vectors=[]};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaHRtbENhbnZhcyIsImN0eCIsIndpbl9sIiwid2luX2giLCJzaXplIiwicmFkaXVzIiwidmVjdG9ycyIsIm1haW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIk1hdGgiLCJtaW4iLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsIndoaWNoIiwiY3R4RXZlbnQiLCJzY3JvbGxFdmVudCIsIm5vZGVFdmVudEhhbmRsZXIiLCJyZWxNb3VzZUNvb3JkcyIsImV2ZW50Iiwic2Nyb2xsIiwieSIsImRlbHRhWSIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJpIiwidGVtcCIsImNsZWFyUmVnaW9uIiwiTm9kZSIsIngiLCJmaWxsIiwiZHJhdyIsImNvb3JkcyIsInJlbW92ZWQiLCJpc0NsaWNrZWQiLCJzcGxpY2UiLCJpc0NvbGxpc2lvbiIsInB1c2giLCJyIiwiRWRnZSIsImhlYWQiLCJ0YWlsIiwidGhpcyIsImJlZ2luUGF0aCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsImluZGV4Iiwic3RhcnRpbmdBbmdsZSIsImVuZEFuZ2xlIiwiUEkiLCJyZWdpb24iLCJhcmMiLCJmaWxsU3R5bGUiLCJsaW5lV2lkdGgiLCJzdHJva2VTdHlsZSIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJmaWxsVGV4dCIsImNsZWFyUmVjdCIsImluX3giLCJpbl95IiwiY2xpY2tlZCIsImFyciIsInRvdGFsT2Zmc2V0WCIsInRvdGFsT2Zmc2V0WSIsImN1cnJlbnRFbGVtZW50Iiwib2Zmc2V0TGVmdCIsInNjcm9sbExlZnQiLCJvZmZzZXRUb3AiLCJzY3JvbGxUb3AiLCJvZmZzZXRQYXJlbnQiLCJwYWdlWCIsInBhZ2VZIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJw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QUtzQixLQUFLVSxPQUFTLEVBQUlWLEtBQUtVLE9BQVFWLEtBQUtVLFNBRzVGVixLQUFLUixVQUFZLFNBQVUyQixFQUFNQyxHQUM3QixJQUFJQyxHQUFVLEVBUWQsT0FOV2xDLEVBQUlTLEVBQVp1QixHQUFrQkEsRUFBUWhDLEVBQUlTLEdBQ2xCbEIsRUFBSWtCLEVBQVp3QixHQUFrQkEsRUFBUTFDLEVBQUlrQixJQUM3QnlCLEdBQVUsR0FJWEEsR0FHWHJCLEtBQUtOLFlBQWMsU0FBUzRCLEdBR3hCLElBRkEsSUFBSUQsR0FBVSxFQUVOdEMsRUFBSSxFQUFHQSxFQUFJdUMsRUFBSTFDLE9BQVFHLElBQzNCLEdBQWEsTUFBVnVDLEVBQUl2QyxHQUFXLENBQ2QsSUFBSW9DLEVBQU9HLEVBQUl2QyxHQUFHSSxFQUNkaUMsRUFBT0UsRUFBSXZDLEdBQUdMLEVBRWZ5QyxFQUFRaEMsRUFBSWEsS0FBS1UsUUFBV1MsRUFBUWhDLEVBQUlhLEtBQUtVLFFBQ3pDVSxFQUFRMUMsRUFBSXNCLEtBQUtVLFFBQVdVLEVBQVExQyxFQUFJc0IsS0FBS1UsU0FDNUNXLEdBQVUsR0FNMUIsT0FBT0EsR0FLZixTQUFTOUMsZUFBZUMsR0FPcEIsSUFOQSxJQUFJK0MsRUFBZSxFQUNmQyxFQUFlLEVBR2ZDLEVBQWlCekIsS0FHakJ1QixHQUFnQkUsRUFBZUMsV0FBYUQsRUFBZUUsV0FDM0RILEdBQWdCQyxFQUFlRyxVQUFZSCxFQUFlSSxVQUV4REosRUFBaUJBLEVBQWVLLGVBS3RDLE1BQU8sQ0FBQzNDLEVBSEVYLEVBQU11RCxNQUFRUixFQUdMN0MsRUFGVEYsRUFBTXdELE1BQVFSLEdBSzVCUyxrQkFBa0JDLFVBQVUzRCxlQUFpQkEsZUFFN0M0RCx5QkFBeUJELFVBQVVFLE1BQVEsV0FDdkNyRixJQUFJbUUsVUFBVSxFQUFFLEVBQUVoRSxLQUFLQSxNQUN2QkUsUUFBVSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaHRtbENhbnZhcztcbnZhciBjdHg7XG52YXIgd2luX2w7XG52YXIgd2luX2g7XG52YXIgc2l6ZTtcbnZhciByYWRpdXM7XG52YXIgdmVjdG9ycztcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgICBodG1sQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUNhbnZhc1wiKTtcbiAgICBjdHggPSBodG1sQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdmVjdG9ycyA9IFtdO1xuICAgIHdpbl9sID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgd2luX2ggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgc2l6ZSA9IE1hdGgubWluKHdpbl9oLCB3aW5fbCk7XG4gICAgcmFkaXVzID0gc2l6ZSAvIDcwO1xuXG4gICAgY3R4LmNhbnZhcy53aWR0aCAgPSBzaXplO1xuICAgIGN0eC5jYW52YXMuaGVpZ2h0ID0gc2l6ZTtcblxuICAgIGh0bWxDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKGV2LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICBjdHhFdmVudCgpO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG5cbiAgICBodG1sQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgc2Nyb2xsRXZlbnQoZXYpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjdHhFdmVudCgpe1xuICAgIHZhciBjb29yZHMgPSBodG1sQ2FudmFzLnJlbE1vdXNlQ29vcmRzKGV2ZW50KTtcbiAgICB2YXIgcmVtb3ZlZCA9IGZhbHNlO1xuICAgIHZhciB0ZW1wID0gbnVsbDtcblxuICAgIG5vZGVFdmVudEhhbmRsZXIoY29vcmRzLCByYWRpdXMsIHJlbW92ZWQsIHRlbXApO1xuICAgIFxufVxuXG5mdW5jdGlvbiBzY3JvbGxFdmVudChldil7XG4gICAgdmFyIHNjcm9sbCA9IDA7XG4gICAgdmFyIHkgPSBldi5kZWx0YVk7XG5cbiAgICBpZih2ZWN0b3JzLmxlbmd0aCA+IDApe1xuICAgICAgICBpZiAoeSA8IDAgJiYgcmFkaXVzID49IChzaXplIC8gNjUpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRvd25cIik7XG4gICAgICAgICAgICBzY3JvbGwgPSAtMjsgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh5ID4gMCAmJiByYWRpdXMgPD0gKHNpemUgLyA2MCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXBcIik7XG4gICAgICAgICAgICBzY3JvbGwgPSAyOyAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmFkaXVzICs9IHNjcm9sbDtcblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB2ZWN0b3JzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbaV07XG4gICAgICAgIHZlY3RvcnNbaV0uY2xlYXJSZWdpb24oKTtcbiAgICAgICAgdmVjdG9yc1tpXSA9IG5ldyBOb2RlKHRlbXAueCwgdGVtcC55LCByYWRpdXMsIHRlbXAuZmlsbCwgMSwgaSk7XG4gICAgICAgIHZlY3RvcnNbaV0uZHJhdygpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbm9kZUV2ZW50SGFuZGxlcihjb29yZHMsIHJhZGl1cywgcmVtb3ZlZCwgdGVtcCl7XG5cbiAgICAvL1RoZSBjb25kaXRpb25zIGdvIGFzIGZvbGxvd3M6XG4gICAgLy8xKSBUaGUgY2lyY2xlIG11c3QgZml0IGluIHRoZSBjYW52YXMgKGxpbmVzIDQyLTQzKVxuICAgIC8vMikgVGhlIGNpcmNsZSBtdXN0IG5vdCBvdmVybGFwIChsaW5lcyA0NylcbiAgICAvLzMpIElmIHRoZSBjaXJjbGUgaXMgYWxyZWFkeSBwcmVzZW50IGRvIG5vdCBhZGQsIGJ1dCByZW1vdmVcblxuICAgIGlmKGNvb3Jkcy54ID4gcmFkaXVzICYmIGNvb3Jkcy54IDwgc2l6ZSAtIHJhZGl1cyl7XG4gICAgICAgIGlmKGNvb3Jkcy55ID4gcmFkaXVzICYmIGNvb3Jkcy55IDwgc2l6ZSAtIHJhZGl1cyl7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdmVjdG9ycy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgdGVtcCA9IHZlY3RvcnNbaV07XG4gICAgICAgICAgICAgICAgaWYodGVtcCAhPSBudWxsICYmIHRlbXAuaXNDbGlja2VkKGNvb3Jkcy54LCBjb29yZHMueSkpe1xuICAgICAgICAgICAgICAgICAgICB0ZW1wLmNsZWFyUmVnaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHJlbW92ZWQgPT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgIHRlbXAgPSBuZXcgTm9kZShjb29yZHMueCwgY29vcmRzLnksIHJhZGl1cywgJ3doaXRlJywgMSwgdmVjdG9ycy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICBpZighdGVtcC5pc0NvbGxpc2lvbih2ZWN0b3JzKSl7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvcnMucHVzaCh0ZW1wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL3JlZHJhdyBub2RlcyBhcyBmb2xsb3dzXG4gICAgLy9pZiB0aGUgaGVhZCB5b3VyIGJsdWVcbiAgICAvL2lmIHRoZSB0YWlsIHlvdXIgcmVkXG4gICAgLy9lbHNlIHlvdXIgZ3JlZW5cblxuICAgIGlmKHZlY3RvcnMubGVuZ3RoID4gMCl7XG4gICAgICAgIHRlbXAgPSB2ZWN0b3JzWzBdO1xuICAgICAgICB0ZW1wLmNsZWFyUmVnaW9uKCk7XG4gICAgICAgIHZlY3RvcnNbMF0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgdGVtcC5yLCAnYmx1ZScsIDEsIDApO1xuICAgICAgICB2ZWN0b3JzWzBdLmRyYXcoKTtcbiAgICB9XG5cbiAgICBmb3IodmFyIGkgPSAxOyBpIDwgdmVjdG9ycy5sZW5ndGggLSAxOyBpKyspe1xuICAgICAgICB0ZW1wID0gdmVjdG9yc1tpXTtcbiAgICAgICAgdmVjdG9yc1tpXS5jbGVhclJlZ2lvbigpO1xuICAgICAgICB2ZWN0b3JzW2ldID0gbmV3IE5vZGUodGVtcC54LCB0ZW1wLnksIHRlbXAuciwgJ3doaXRlJywgMSwgaSk7XG4gICAgICAgIHZlY3RvcnNbaV0uZHJhdygpO1xuICAgIH1cblxuICAgIGlmKHZlY3RvcnMubGVuZ3RoID4gMSl7XG4gICAgICAgIHRlbXAgPSB2ZWN0b3JzW3ZlY3RvcnMubGVuZ3RoIC0gMV07XG4gICAgICAgIHRlbXAuY2xlYXJSZWdpb24oKTtcbiAgICAgICAgdmVjdG9yc1t2ZWN0b3JzLmxlbmd0aCAtIDFdID0gbmV3IE5vZGUodGVtcC54LCB0ZW1wLnksIHRlbXAuciwgJ3JlZCcsIDEsIHZlY3RvcnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHZlY3RvcnNbdmVjdG9ycy5sZW5ndGggLSAxXS5kcmF3KCk7XG4gICAgfVxuICAgIFxufVxuXG5mdW5jdGlvbiBFZGdlKGhlYWQsIHRhaWwpe1xuICAgIHRoaXMuaGVhZCA9IGhlYWQ7XG4gICAgdGhpcy50YWlsID0gdGFpbDtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdmVyJztcbiAgICAgICAgY3R4Lm1vdmVUbyhoZWFkLngsIGhlYWQueSk7XG4gICAgICAgIGN0eC5saW5lVG8odGFpbC54LCB0YWlsLnkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTm9kZSh4LCB5LCByLCBmaWxsLCBzdHJva2UsIGluZGV4KSB7XG4gICAgdGhpcy5zdGFydGluZ0FuZ2xlID0gMDtcbiAgICB0aGlzLmVuZEFuZ2xlID0gMiAqIE1hdGguUEk7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuciA9IHI7XG4gICAgdGhpcy5yZWdpb24gPSAoc2l6ZSAvIDYwKSAqIDIuMjtcbiAgICBcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgdGhpcy5maWxsID0gZmlsbDtcbiAgICB0aGlzLnN0cm9rZSA9IHN0cm9rZTtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguYXJjKHRoaXMueCwgdGhpcy55LCB0aGlzLnIsIHRoaXMuc3RhcnRpbmdBbmdsZSwgdGhpcy5lbmRBbmdsZSk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmZpbGw7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAzO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICBpZihyID49IHNpemUgLyA2MCl7XG4gICAgICAgICAgICBjdHguZm9udCA9ICc4cHQgQ2FsaWJyaSc7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChpbmRleCwgdGhpcy54LCB0aGlzLnkrMyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNsZWFyUmVnaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGN0eC5jbGVhclJlY3QodGhpcy54IC0gKHRoaXMucmVnaW9uIC8gMiksIHRoaXMueSAtICh0aGlzLnJlZ2lvbiAvIDIpLCB0aGlzLnJlZ2lvbiwgdGhpcy5yZWdpb24pO1xuICAgIH1cblxuICAgIHRoaXMuaXNDbGlja2VkID0gZnVuY3Rpb24gKGluX3gsIGluX3kpIHtcbiAgICAgICAgdmFyIGNsaWNrZWQgPSBmYWxzZTtcblxuICAgICAgICBpZihpbl94ID4gKHggLSByKSAmJiBpbl94IDwgKHggKyByKSl7XG4gICAgICAgICAgICBpZihpbl95ID4gKHkgLSByKSAmJiBpbl95IDwgKHkgKyByKSl7XG4gICAgICAgICAgICAgICAgY2xpY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xpY2tlZDtcbiAgICB9XG5cbiAgICB0aGlzLmlzQ29sbGlzaW9uID0gZnVuY3Rpb24oYXJyKXtcbiAgICAgICAgdmFyIGNsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYoYXJyW2ldICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIHZhciBpbl94ID0gYXJyW2ldLng7XG4gICAgICAgICAgICAgICAgdmFyIGluX3kgPSBhcnJbaV0ueTtcblxuICAgICAgICAgICAgICAgIGlmKGluX3ggPiAoeCAtIHRoaXMucmVnaW9uKSAmJiBpbl94IDwgKHggKyB0aGlzLnJlZ2lvbikpe1xuICAgICAgICAgICAgICAgICAgICBpZihpbl95ID4gKHkgLSB0aGlzLnJlZ2lvbikgJiYgaW5feSA8ICh5ICsgdGhpcy5yZWdpb24pKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsaWNrZWQ7XG5cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbE1vdXNlQ29vcmRzKGV2ZW50KXtcbiAgICB2YXIgdG90YWxPZmZzZXRYID0gMDtcbiAgICB2YXIgdG90YWxPZmZzZXRZID0gMDtcbiAgICB2YXIgY2FudmFzWCA9IDA7XG4gICAgdmFyIGNhbnZhc1kgPSAwO1xuICAgIHZhciBjdXJyZW50RWxlbWVudCA9IHRoaXM7XG5cbiAgICBkb3tcbiAgICAgICAgdG90YWxPZmZzZXRYICs9IGN1cnJlbnRFbGVtZW50Lm9mZnNldExlZnQgLSBjdXJyZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgICAgICB0b3RhbE9mZnNldFkgKz0gY3VycmVudEVsZW1lbnQub2Zmc2V0VG9wIC0gY3VycmVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIH1cbiAgICB3aGlsZShjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50Lm9mZnNldFBhcmVudClcblxuICAgIGNhbnZhc1ggPSBldmVudC5wYWdlWCAtIHRvdGFsT2Zmc2V0WDtcbiAgICBjYW52YXNZID0gZXZlbnQucGFnZVkgLSB0b3RhbE9mZnNldFk7XG5cbiAgICByZXR1cm4ge3g6Y2FudmFzWCwgeTpjYW52YXNZfVxufVxuXG5IVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUucmVsTW91c2VDb29yZHMgPSByZWxNb3VzZUNvb3JkcztcblxuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCl7XG4gICAgY3R4LmNsZWFyUmVjdCgwLDAsc2l6ZSxzaXplKTtcbiAgICB2ZWN0b3JzID0gW107XG59Il19
