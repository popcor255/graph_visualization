var htmlCanvas,ctx,win_l,win_h,size,radius,vectors;function main(){htmlCanvas=document.getElementById("myCanvas"),ctx=htmlCanvas.getContext("2d"),vectors=[],win_l=window.innerWidth,win_h=window.innerHeight,size=Math.min(win_h,win_l),radius=size/60,ctx.canvas.width=size,ctx.canvas.height=size,htmlCanvas.addEventListener("mousedown",function(e){1===e.which&&ctxEvent()},!1),htmlCanvas.addEventListener("wheel",function(e){scrollEvent(e)})}function ctxEvent(){nodeEventHandler(htmlCanvas.relMouseCoords(event),radius,!1,null)}function scrollEvent(e){var t=0,n=e.deltaY;0<vectors.length&&(n<0&&size/60<=radius&&(console.log("down"),t=-2),0<n&&radius<=size/60&&(console.log("up"),t=2)),radius+=t;for(var o=0;o<vectors.length;o++)temp=vectors[o],vectors[o].clearRegion(),vectors[o]=new Node(temp.x,temp.y,radius,temp.fill,1),vectors[o].draw()}function nodeEventHandler(e,t,n,o){if(e.x>t&&e.x<size-t&&e.y>t&&e.y<size-t){for(var i=0;i<vectors.length;i++)null!=(o=vectors[i])&&o.isClicked(e.x,e.y)&&(o.clearRegion(),vectors.splice(i,1),n=!0);0==n&&((o=new Node(e.x,e.y,t,"white",1)).isCollision(vectors)||vectors.push(o))}0<vectors.length&&((o=vectors[0]).clearRegion(),vectors[0]=new Node(o.x,o.y,o.r,"blue",1),vectors[0].draw());for(i=1;i<vectors.length-1;i++)o=vectors[i],vectors[i].clearRegion(),vectors[i]=new Node(o.x,o.y,o.r,"white",1),vectors[i].draw();1<vectors.length&&((o=vectors[vectors.length-1]).clearRegion(),vectors[vectors.length-1]=new Node(o.x,o.y,o.r,"red",1),vectors[vectors.length-1].draw())}function Edge(e,t){this.head=e,this.tail=t,this.draw=function(){ctx.beginPath(),ctx.globalCompositeOperation="destination-over",ctx.moveTo(e.x,e.y),ctx.lineTo(t.x,t.y),ctx.stroke(),ctx.globalCompositeOperation="source-over"}}function Node(s,r,o,e,t){this.startingAngle=0,this.endAngle=2*Math.PI,this.x=s,this.y=r,this.r=o,this.region=2.2*o,this.fill=e,this.stroke=t,this.draw=function(){ctx.beginPath(),ctx.arc(this.x,this.y,this.r,this.startingAngle,this.endAngle),ctx.fillStyle=this.fill,ctx.lineWidth=3,ctx.fill(),ctx.strokeStyle=this.stroke,ctx.stroke()},this.clearRegion=function(){ctx.clearRect(this.x-this.region/2,this.y-this.region/2,this.region,this.region)},this.isClicked=function(e,t){var n=!1;return s-o<e&&e<s+o&&r-o<t&&t<r+o&&(n=!0),n},this.isCollision=function(e){for(var t=!1,n=0;n<e.length;n++)if(null!=e[n]){var o=e[n].x,i=e[n].y;o>s-this.region&&o<s+this.region&&i>r-this.region&&i<r+this.region&&(t=!0)}return t}}function relMouseCoords(e){for(var t=0,n=0,o=this;t+=o.offsetLeft-o.scrollLeft,n+=o.offsetTop-o.scrollTop,o=o.offsetParent;);return{x:e.pageX-t,y:e.pageY-n}}HTMLCanvasElement.prototype.relMouseCoords=relMouseCoords,CanvasRenderingContext2D.prototype.clear=function(){ctx.clearRect(0,0,size,size),vectors=[]};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaHRtbENhbnZhcyIsImN0eCIsIndpbl9sIiwid2luX2giLCJzaXplIiwicmFkaXVzIiwidmVjdG9ycyIsIm1haW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIk1hdGgiLCJtaW4iLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsIndoaWNoIiwiY3R4RXZlbnQiLCJzY3JvbGxFdmVudCIsIm5vZGVFdmVudEhhbmRsZXIiLCJyZWxNb3VzZUNvb3JkcyIsImV2ZW50Iiwic2Nyb2xsIiwieSIsImRlbHRhWSIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJpIiwidGVtcCIsImNsZWFyUmVnaW9uIiwiTm9kZSIsIngiLCJmaWxsIiwiZHJhdyIsImNvb3JkcyIsInJlbW92ZWQiLCJpc0NsaWNrZWQiLCJzcGxpY2UiLCJpc0NvbGxpc2lvbiIsInB1c2giLCJyIiwiRWRnZSIsImhlYWQiLCJ0YWlsIiwidGhpcyIsImJlZ2luUGF0aCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsInN0YXJ0aW5nQW5nbGUiLCJlbmRBbmdsZSIsIlBJIiwicmVnaW9uIiwiYXJjIiwiZmlsbFN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJjbGVhclJlY3QiLCJpbl94IiwiaW5feSIsImNsaWNrZWQiLCJhcnIiLCJ0b3RhbE9mZnNldFgiLCJ0b3RhbE9mZnNldFkiLCJjdXJyZW50RWxlbWVudCIsIm9mZnNldExlZnQiLCJzY3JvbGxMZWZ0Iiwib2Zmc2V0VG9wIiwic2Nyb2xsVG9wIiwib2Zmc2V0UGFyZW50IiwicGFnZVgiLCJwYWdlWSIsIkhUTUxDYW52YXNFbGVtZW50IiwicHJvdG90eXBlIiwiQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIiwiY2xlYXIiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFdBQ0FDLElBQ0FDLE1BQ0FDLE1BQ0FDLEtBQ0FDLE9BQ0FDLFFBRUosU0FBU0MsT0FDTFAsV0FBYVEsU0FBU0MsZUFBZSxZQUNyQ1IsSUFBTUQsV0FBV1UsV0FBVyxNQUM1QkosUUFBVSxHQUNWSixNQUFRUyxPQUFPQyxXQUNmVCxNQUFRUSxPQUFPRSxZQUNmVCxLQUFPVSxLQUFLQyxJQUFJWixNQUFPRCxPQUN2QkcsT0FBU0QsS0FBTyxHQUVoQkgsSUFBSWUsT0FBT0MsTUFBU2IsS0FDcEJILElBQUllLE9BQU9FLE9BQVNkLEtBRXBCSixXQUFXbUIsaUJBQWlCLFlBQWMsU0FBU0MsR0FDOUIsSUFBYkEsRUFBR0MsT0FDSEMsYUFFTCxHQUdIdEIsV0FBV21CLGlCQUFpQixRQUFTLFNBQVNDLEdBQzFDRyxZQUFZSCxLQUlwQixTQUFTRSxXQUtMRSxpQkFKYXhCLFdBQVd5QixlQUFlQyxPQUlkckIsUUFIWCxFQUNILE1BTWYsU0FBU2tCLFlBQVlILEdBQ2pCLElBQUlPLEVBQVMsRUFDVEMsRUFBSVIsRUFBR1MsT0FFUyxFQUFqQnZCLFFBQVF3QixTQUNIRixFQUFJLEdBQWdCeEIsS0FBTyxJQUFsQkMsU0FDVDBCLFFBQVFDLElBQUksUUFDWkwsR0FBVSxHQUdOLEVBQUpDLEdBQVN2QixRQUFXRCxLQUFPLEtBQzNCMkIsUUFBUUMsSUFBSSxNQUNaTCxFQUFTLElBSWpCdEIsUUFBVXNCLEVBRVYsSUFBSSxJQUFJTSxFQUFJLEVBQUdBLEVBQUkzQixRQUFRd0IsT0FBUUcsSUFDL0JDLEtBQU81QixRQUFRMkIsR0FDZjNCLFFBQVEyQixHQUFHRSxjQUNYN0IsUUFBUTJCLEdBQUssSUFBSUcsS0FBS0YsS0FBS0csRUFBR0gsS0FBS04sRUFBR3ZCLE9BQVE2QixLQUFLSSxLQUFNLEdBQ3pEaEMsUUFBUTJCLEdBQUdNLE9BSW5CLFNBQVNmLGlCQUFpQmdCLEVBQVFuQyxFQUFRb0MsRUFBU1AsR0FPL0MsR0FBR00sRUFBT0gsRUFBSWhDLEdBQVVtQyxFQUFPSCxFQUFJakMsS0FBT0MsR0FDbkNtQyxFQUFPWixFQUFJdkIsR0FBVW1DLEVBQU9aLEVBQUl4QixLQUFPQyxFQUFPLENBQzdDLElBQUksSUFBSTRCLEVBQUksRUFBR0EsRUFBSTNCLFFBQVF3QixPQUFRRyxJQUVwQixPQURYQyxFQUFPNUIsUUFBUTJCLEtBQ0lDLEVBQUtRLFVBQVVGLEVBQU9ILEVBQUdHLEVBQU9aLEtBQy9DTSxFQUFLQyxjQUNMN0IsUUFBUXFDLE9BQU9WLEVBQUcsR0FDbEJRLEdBQVUsR0FJSixHQUFYQSxLQUNDUCxFQUFPLElBQUlFLEtBQUtJLEVBQU9ILEVBQUdHLEVBQU9aLEVBQUd2QixFQUFRLFFBQVMsSUFDNUN1QyxZQUFZdEMsVUFDakJBLFFBQVF1QyxLQUFLWCxJQVdULEVBQWpCNUIsUUFBUXdCLFVBQ1BJLEVBQU81QixRQUFRLElBQ1Y2QixjQUNMN0IsUUFBUSxHQUFLLElBQUk4QixLQUFLRixFQUFLRyxFQUFHSCxFQUFLTixFQUFHTSxFQUFLWSxFQUFHLE9BQVEsR0FDdER4QyxRQUFRLEdBQUdpQyxRQUdmLElBQVFOLEVBQUksRUFBR0EsRUFBSTNCLFFBQVF3QixPQUFTLEVBQUdHLElBQ25DQyxFQUFPNUIsUUFBUTJCLEdBQ2YzQixRQUFRMkIsR0FBR0UsY0FDWDdCLFFBQVEyQixHQUFLLElBQUlHLEtBQUtGLEVBQUtHLEVBQUdILEVBQUtOLEVBQUdNLEVBQUtZLEVBQUcsUUFBUyxHQUN2RHhDLFFBQVEyQixHQUFHTSxPQUdLLEVBQWpCakMsUUFBUXdCLFVBQ1BJLEVBQU81QixRQUFRQSxRQUFRd0IsT0FBUyxJQUMzQkssY0FDTDdCLFFBQVFBLFFBQVF3QixPQUFTLEdBQUssSUFBSU0sS0FBS0YsRUFBS0csRUFBR0gsRUFBS04sRUFBR00sRUFBS1ksRUFBRyxNQUFPLEdBQ3RFeEMsUUFBUUEsUUFBUXdCLE9BQVMsR0FBR1MsUUFLcEMsU0FBU1EsS0FBS0MsRUFBTUMsR0FDaEJDLEtBQUtGLEtBQU9BLEVBQ1pFLEtBQUtELEtBQU9BLEVBRVpDLEtBQUtYLEtBQU8sV0FDUnRDLElBQUlrRCxZQUNKbEQsSUFBSW1ELHlCQUEyQixtQkFDL0JuRCxJQUFJb0QsT0FBT0wsRUFBS1gsRUFBR1csRUFBS3BCLEdBQ3hCM0IsSUFBSXFELE9BQU9MLEVBQUtaLEVBQUdZLEVBQUtyQixHQUN4QjNCLElBQUlzRCxTQUNKdEQsSUFBSW1ELHlCQUEyQixlQUl2QyxTQUFTaEIsS0FBS0MsRUFBR1QsRUFBR2tCLEVBQUdSLEVBQU1pQixHQUN6QkwsS0FBS00sY0FBZ0IsRUFDckJOLEtBQUtPLFNBQVcsRUFBSTNDLEtBQUs0QyxHQUN6QlIsS0FBS2IsRUFBSUEsRUFDVGEsS0FBS3RCLEVBQUlBLEVBQ1RzQixLQUFLSixFQUFJQSxFQUNUSSxLQUFLUyxPQUFhLElBQUpiLEVBRWRJLEtBQUtaLEtBQU9BLEVBQ1pZLEtBQUtLLE9BQVNBLEVBRWRMLEtBQUtYLEtBQU8sV0FDUnRDLElBQUlrRCxZQUNKbEQsSUFBSTJELElBQUlWLEtBQUtiLEVBQUdhLEtBQUt0QixFQUFHc0IsS0FBS0osRUFBR0ksS0FBS00sY0FBZU4sS0FBS08sVUFDekR4RCxJQUFJNEQsVUFBWVgsS0FBS1osS0FDckJyQyxJQUFJNkQsVUFBWSxFQUNoQjdELElBQUlxQyxPQUNKckMsSUFBSThELFlBQWNiLEtBQUtLLE9BQ3ZCdEQsSUFBSXNELFVBR1JMLEtBQUtmLFlBQWMsV0FDZmxDLElBQUkrRCxVQUFVZCxLQUFLYixFQUFLYSxLQUFLUyxPQUFTLEVBQUlULEtBQUt0QixFQUFLc0IsS0FBS1MsT0FBUyxFQUFJVCxLQUFLUyxPQUFRVCxLQUFLUyxTQUc1RlQsS0FBS1IsVUFBWSxTQUFVdUIsRUFBTUMsR0FDN0IsSUFBSUMsR0FBVSxFQVFkLE9BTlc5QixFQUFJUyxFQUFabUIsR0FBa0JBLEVBQVE1QixFQUFJUyxHQUNsQmxCLEVBQUlrQixFQUFab0IsR0FBa0JBLEVBQVF0QyxFQUFJa0IsSUFDN0JxQixHQUFVLEdBSVhBLEdBR1hqQixLQUFLTixZQUFjLFNBQVN3QixHQUd4QixJQUZBLElBQUlELEdBQVUsRUFFTmxDLEVBQUksRUFBR0EsRUFBSW1DLEVBQUl0QyxPQUFRRyxJQUMzQixHQUFhLE1BQVZtQyxFQUFJbkMsR0FBVyxDQUNkLElBQUlnQyxFQUFPRyxFQUFJbkMsR0FBR0ksRUFDZDZCLEVBQU9FLEVBQUluQyxHQUFHTCxFQUVmcUMsRUFBUTVCLEVBQUlhLEtBQUtTLFFBQVdNLEVBQVE1QixFQUFJYSxLQUFLUyxRQUN6Q08sRUFBUXRDLEVBQUlzQixLQUFLUyxRQUFXTyxFQUFRdEMsRUFBSXNCLEtBQUtTLFNBQzVDUSxHQUFVLEdBTTFCLE9BQU9BLEdBS2YsU0FBUzFDLGVBQWVDLEdBT3BCLElBTkEsSUFBSTJDLEVBQWUsRUFDZkMsRUFBZSxFQUdmQyxFQUFpQnJCLEtBR2pCbUIsR0FBZ0JFLEVBQWVDLFdBQWFELEVBQWVFLFdBQzNESCxHQUFnQkMsRUFBZUcsVUFBWUgsRUFBZUksVUFFeERKLEVBQWlCQSxFQUFlSyxlQUt0QyxNQUFPLENBQUN2QyxFQUhFWCxFQUFNbUQsTUFBUVIsRUFHTHpDLEVBRlRGLEVBQU1vRCxNQUFRUixHQUk1QlMsa0JBQWtCQyxVQUFVdkQsZUFBaUJBLGVBRTdDd0QseUJBQXlCRCxVQUFVRSxNQUFRLFdBQ3ZDakYsSUFBSStELFVBQVUsRUFBRSxFQUFFNUQsS0FBS0EsTUFDdkJFLFFBQVUiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGh0bWxDYW52YXM7XG52YXIgY3R4O1xudmFyIHdpbl9sO1xudmFyIHdpbl9oO1xudmFyIHNpemU7XG52YXIgcmFkaXVzO1xudmFyIHZlY3RvcnM7XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgaHRtbENhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlDYW52YXNcIik7XG4gICAgY3R4ID0gaHRtbENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHZlY3RvcnMgPSBbXTtcbiAgICB3aW5fbCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHdpbl9oID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIHNpemUgPSBNYXRoLm1pbih3aW5faCwgd2luX2wpO1xuICAgIHJhZGl1cyA9IHNpemUgLyA2MDtcblxuICAgIGN0eC5jYW52YXMud2lkdGggID0gc2l6ZTtcbiAgICBjdHguY2FudmFzLmhlaWdodCA9IHNpemU7XG5cbiAgICBodG1sQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChldi53aGljaCA9PT0gMSkge1xuICAgICAgICAgICAgY3R4RXZlbnQoKTtcbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcblxuXG4gICAgaHRtbENhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHNjcm9sbEV2ZW50KGV2KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3R4RXZlbnQoKXtcbiAgICB2YXIgY29vcmRzID0gaHRtbENhbnZhcy5yZWxNb3VzZUNvb3JkcyhldmVudCk7XG4gICAgdmFyIHJlbW92ZWQgPSBmYWxzZTtcbiAgICB2YXIgdGVtcCA9IG51bGw7XG5cbiAgICBub2RlRXZlbnRIYW5kbGVyKGNvb3JkcywgcmFkaXVzLCByZW1vdmVkLCB0ZW1wKTtcbiAgICBcbn1cblxuZnVuY3Rpb24gc2Nyb2xsRXZlbnQoZXYpe1xuICAgIHZhciBzY3JvbGwgPSAwO1xuICAgIHZhciB5ID0gZXYuZGVsdGFZO1xuXG4gICAgaWYodmVjdG9ycy5sZW5ndGggPiAwKXtcbiAgICAgICAgaWYgKHkgPCAwICYmIHJhZGl1cyA+PSAoc2l6ZSAvIDYwKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkb3duXCIpO1xuICAgICAgICAgICAgc2Nyb2xsID0gLTI7ICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoeSA+IDAgJiYgcmFkaXVzIDw9IChzaXplIC8gNjApKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVwXCIpO1xuICAgICAgICAgICAgc2Nyb2xsID0gMjsgICBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJhZGl1cyArPSBzY3JvbGw7XG5cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdmVjdG9ycy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHRlbXAgPSB2ZWN0b3JzW2ldO1xuICAgICAgICB2ZWN0b3JzW2ldLmNsZWFyUmVnaW9uKCk7XG4gICAgICAgIHZlY3RvcnNbaV0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgcmFkaXVzLCB0ZW1wLmZpbGwsIDEpO1xuICAgICAgICB2ZWN0b3JzW2ldLmRyYXcoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vZGVFdmVudEhhbmRsZXIoY29vcmRzLCByYWRpdXMsIHJlbW92ZWQsIHRlbXApe1xuXG4gICAgLy9UaGUgY29uZGl0aW9ucyBnbyBhcyBmb2xsb3dzOlxuICAgIC8vMSkgVGhlIGNpcmNsZSBtdXN0IGZpdCBpbiB0aGUgY2FudmFzIChsaW5lcyA0Mi00MylcbiAgICAvLzIpIFRoZSBjaXJjbGUgbXVzdCBub3Qgb3ZlcmxhcCAobGluZXMgNDcpXG4gICAgLy8zKSBJZiB0aGUgY2lyY2xlIGlzIGFscmVhZHkgcHJlc2VudCBkbyBub3QgYWRkLCBidXQgcmVtb3ZlXG5cbiAgICBpZihjb29yZHMueCA+IHJhZGl1cyAmJiBjb29yZHMueCA8IHNpemUgLSByYWRpdXMpe1xuICAgICAgICBpZihjb29yZHMueSA+IHJhZGl1cyAmJiBjb29yZHMueSA8IHNpemUgLSByYWRpdXMpe1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHZlY3RvcnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIHRlbXAgPSB2ZWN0b3JzW2ldO1xuICAgICAgICAgICAgICAgIGlmKHRlbXAgIT0gbnVsbCAmJiB0ZW1wLmlzQ2xpY2tlZChjb29yZHMueCwgY29vcmRzLnkpKXtcbiAgICAgICAgICAgICAgICAgICAgdGVtcC5jbGVhclJlZ2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB2ZWN0b3JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihyZW1vdmVkID09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICB0ZW1wID0gbmV3IE5vZGUoY29vcmRzLngsIGNvb3Jkcy55LCByYWRpdXMsICd3aGl0ZScsIDEpO1xuICAgICAgICAgICAgICAgIGlmKCF0ZW1wLmlzQ29sbGlzaW9uKHZlY3RvcnMpKXtcbiAgICAgICAgICAgICAgICAgICAgdmVjdG9ycy5wdXNoKHRlbXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vcmVkcmF3IG5vZGVzIGFzIGZvbGxvd3NcbiAgICAvL2lmIHRoZSBoZWFkIHlvdXIgYmx1ZVxuICAgIC8vaWYgdGhlIHRhaWwgeW91ciByZWRcbiAgICAvL2Vsc2UgeW91ciBncmVlblxuXG4gICAgaWYodmVjdG9ycy5sZW5ndGggPiAwKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbMF07XG4gICAgICAgIHRlbXAuY2xlYXJSZWdpb24oKTtcbiAgICAgICAgdmVjdG9yc1swXSA9IG5ldyBOb2RlKHRlbXAueCwgdGVtcC55LCB0ZW1wLnIsICdibHVlJywgMSk7XG4gICAgICAgIHZlY3RvcnNbMF0uZHJhdygpO1xuICAgIH1cblxuICAgIGZvcih2YXIgaSA9IDE7IGkgPCB2ZWN0b3JzLmxlbmd0aCAtIDE7IGkrKyl7XG4gICAgICAgIHRlbXAgPSB2ZWN0b3JzW2ldO1xuICAgICAgICB2ZWN0b3JzW2ldLmNsZWFyUmVnaW9uKCk7XG4gICAgICAgIHZlY3RvcnNbaV0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgdGVtcC5yLCAnd2hpdGUnLCAxKTtcbiAgICAgICAgdmVjdG9yc1tpXS5kcmF3KCk7XG4gICAgfVxuXG4gICAgaWYodmVjdG9ycy5sZW5ndGggPiAxKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbdmVjdG9ycy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGVtcC5jbGVhclJlZ2lvbigpO1xuICAgICAgICB2ZWN0b3JzW3ZlY3RvcnMubGVuZ3RoIC0gMV0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgdGVtcC5yLCAncmVkJywgMSk7XG4gICAgICAgIHZlY3RvcnNbdmVjdG9ycy5sZW5ndGggLSAxXS5kcmF3KCk7XG4gICAgfVxuICAgIFxufVxuXG5mdW5jdGlvbiBFZGdlKGhlYWQsIHRhaWwpe1xuICAgIHRoaXMuaGVhZCA9IGhlYWQ7XG4gICAgdGhpcy50YWlsID0gdGFpbDtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdmVyJztcbiAgICAgICAgY3R4Lm1vdmVUbyhoZWFkLngsIGhlYWQueSk7XG4gICAgICAgIGN0eC5saW5lVG8odGFpbC54LCB0YWlsLnkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTm9kZSh4LCB5LCByLCBmaWxsLCBzdHJva2UpIHtcbiAgICB0aGlzLnN0YXJ0aW5nQW5nbGUgPSAwO1xuICAgIHRoaXMuZW5kQW5nbGUgPSAyICogTWF0aC5QSTtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5yID0gcjtcbiAgICB0aGlzLnJlZ2lvbiA9IHIgKiAyLjI7XG5cbiAgICB0aGlzLmZpbGwgPSBmaWxsO1xuICAgIHRoaXMuc3Ryb2tlID0gc3Ryb2tlO1xuXG4gICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5hcmModGhpcy54LCB0aGlzLnksIHRoaXMuciwgdGhpcy5zdGFydGluZ0FuZ2xlLCB0aGlzLmVuZEFuZ2xlKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuZmlsbDtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuc3Ryb2tlO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhclJlZ2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHguY2xlYXJSZWN0KHRoaXMueCAtICh0aGlzLnJlZ2lvbiAvIDIpLCB0aGlzLnkgLSAodGhpcy5yZWdpb24gLyAyKSwgdGhpcy5yZWdpb24sIHRoaXMucmVnaW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzQ2xpY2tlZCA9IGZ1bmN0aW9uIChpbl94LCBpbl95KSB7XG4gICAgICAgIHZhciBjbGlja2VkID0gZmFsc2U7XG5cbiAgICAgICAgaWYoaW5feCA+ICh4IC0gcikgJiYgaW5feCA8ICh4ICsgcikpe1xuICAgICAgICAgICAgaWYoaW5feSA+ICh5IC0gcikgJiYgaW5feSA8ICh5ICsgcikpe1xuICAgICAgICAgICAgICAgIGNsaWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsaWNrZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5pc0NvbGxpc2lvbiA9IGZ1bmN0aW9uKGFycil7XG4gICAgICAgIHZhciBjbGlja2VkID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGlmKGFycltpXSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICB2YXIgaW5feCA9IGFycltpXS54O1xuICAgICAgICAgICAgICAgIHZhciBpbl95ID0gYXJyW2ldLnk7XG5cbiAgICAgICAgICAgICAgICBpZihpbl94ID4gKHggLSB0aGlzLnJlZ2lvbikgJiYgaW5feCA8ICh4ICsgdGhpcy5yZWdpb24pKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5feSA+ICh5IC0gdGhpcy5yZWdpb24pICYmIGluX3kgPCAoeSArIHRoaXMucmVnaW9uKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGlja2VkO1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWxNb3VzZUNvb3JkcyhldmVudCl7XG4gICAgdmFyIHRvdGFsT2Zmc2V0WCA9IDA7XG4gICAgdmFyIHRvdGFsT2Zmc2V0WSA9IDA7XG4gICAgdmFyIGNhbnZhc1ggPSAwO1xuICAgIHZhciBjYW52YXNZID0gMDtcbiAgICB2YXIgY3VycmVudEVsZW1lbnQgPSB0aGlzO1xuXG4gICAgZG97XG4gICAgICAgIHRvdGFsT2Zmc2V0WCArPSBjdXJyZW50RWxlbWVudC5vZmZzZXRMZWZ0IC0gY3VycmVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICAgICAgdG90YWxPZmZzZXRZICs9IGN1cnJlbnRFbGVtZW50Lm9mZnNldFRvcCAtIGN1cnJlbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICB9XG4gICAgd2hpbGUoY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5vZmZzZXRQYXJlbnQpXG5cbiAgICBjYW52YXNYID0gZXZlbnQucGFnZVggLSB0b3RhbE9mZnNldFg7XG4gICAgY2FudmFzWSA9IGV2ZW50LnBhZ2VZIC0gdG90YWxPZmZzZXRZO1xuXG4gICAgcmV0dXJuIHt4OmNhbnZhc1gsIHk6Y2FudmFzWX1cbn1cbkhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS5yZWxNb3VzZUNvb3JkcyA9IHJlbE1vdXNlQ29vcmRzO1xuXG5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKXtcbiAgICBjdHguY2xlYXJSZWN0KDAsMCxzaXplLHNpemUpO1xuICAgIHZlY3RvcnMgPSBbXTtcbn0iXX0=
