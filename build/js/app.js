var htmlCanvas,ctx,win_l,win_h,size,vectors;function main(){htmlCanvas=document.getElementById("myCanvas"),ctx=htmlCanvas.getContext("2d"),vectors=[],win_l=window.innerWidth,win_h=window.innerHeight,size=Math.min(win_h,win_l),ctx.canvas.width=size,ctx.canvas.height=size,htmlCanvas.addEventListener("mousedown",function(t){1===t.which&&ctxEvent()},!1)}function ctxEvent(){nodeEventHandler(htmlCanvas.relMouseCoords(event),size/60,!1,null)}function nodeEventHandler(t,e,n,i){if(t.x>e&&t.x<size-e&&t.y>e&&t.y<size-e){for(var o=0;o<vectors.length;o++)null!=(i=vectors[o])&&i.isClicked(t.x,t.y)&&(i.clearRegion(),vectors.splice(o,1),n=!0);0==n&&((i=new Node(t.x,t.y,e,"green",1)).isCollision(vectors)||vectors.push(i))}0<vectors.length&&((i=vectors[0]).clearRegion(),vectors[0]=new Node(i.x,i.y,i.r,"blue",1),vectors[0].draw());for(o=1;o<vectors.length-1;o++)i=vectors[o],vectors[o].clearRegion(),vectors[o]=new Node(i.x,i.y,i.r,"green",1),vectors[o].draw();1<vectors.length&&((i=vectors[vectors.length-1]).clearRegion(),vectors[vectors.length-1]=new Node(i.x,i.y,i.r,"red",1),vectors[vectors.length-1].draw())}function Edge(t,e){this.head=t,this.tail=e,this.draw=function(){ctx.beginPath(),ctx.globalCompositeOperation="destination-over",ctx.moveTo(t.x,t.y),ctx.lineTo(e.x,e.y),ctx.stroke(),ctx.globalCompositeOperation="source-over"}}function Node(s,r,i,t,e){this.startingAngle=0,this.endAngle=2*Math.PI,this.x=s,this.y=r,this.r=i,this.region=2.2*i,this.fill=t,this.stroke=e,this.draw=function(){ctx.beginPath(),ctx.arc(this.x,this.y,this.r,this.startingAngle,this.endAngle),ctx.fillStyle=this.fill,ctx.lineWidth=3,ctx.fill(),ctx.strokeStyle=this.stroke,ctx.stroke()},this.clearRegion=function(){ctx.clearRect(this.x-this.region/2,this.y-this.region/2,this.region,this.region)},this.isClicked=function(t,e){var n=!1;return s-i<t&&t<s+i&&r-i<e&&e<r+i&&(n=!0),n},this.isCollision=function(t){for(var e=!1,n=0;n<t.length;n++)if(null!=t[n]){var i=t[n].x,o=t[n].y;i>s-this.region&&i<s+this.region&&o>r-this.region&&o<r+this.region&&(e=!0)}return e}}function relMouseCoords(t){for(var e=0,n=0,i=this;e+=i.offsetLeft-i.scrollLeft,n+=i.offsetTop-i.scrollTop,i=i.offsetParent;);return{x:t.pageX-e,y:t.pageY-n}}HTMLCanvasElement.prototype.relMouseCoords=relMouseCoords,CanvasRenderingContext2D.prototype.clear=function(){ctx.clearRect(0,0,size,size),vectors=[]};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaHRtbENhbnZhcyIsImN0eCIsIndpbl9sIiwid2luX2giLCJzaXplIiwidmVjdG9ycyIsIm1haW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIk1hdGgiLCJtaW4iLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsIndoaWNoIiwiY3R4RXZlbnQiLCJub2RlRXZlbnRIYW5kbGVyIiwicmVsTW91c2VDb29yZHMiLCJldmVudCIsImNvb3JkcyIsInJhZGl1cyIsInJlbW92ZWQiLCJ0ZW1wIiwieCIsInkiLCJpIiwibGVuZ3RoIiwiaXNDbGlja2VkIiwiY2xlYXJSZWdpb24iLCJzcGxpY2UiLCJOb2RlIiwiaXNDb2xsaXNpb24iLCJwdXNoIiwiciIsImRyYXciLCJFZGdlIiwiaGVhZCIsInRhaWwiLCJ0aGlzIiwiYmVnaW5QYXRoIiwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiZmlsbCIsInN0YXJ0aW5nQW5nbGUiLCJlbmRBbmdsZSIsIlBJIiwicmVnaW9uIiwiYXJjIiwiZmlsbFN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJjbGVhclJlY3QiLCJpbl94IiwiaW5feSIsImNsaWNrZWQiLCJhcnIiLCJ0b3RhbE9mZnNldFgiLCJ0b3RhbE9mZnNldFkiLCJjdXJyZW50RWxlbWVudCIsIm9mZnNldExlZnQiLCJzY3JvbGxMZWZ0Iiwib2Zmc2V0VG9wIiwic2Nyb2xsVG9wIiwib2Zmc2V0UGFyZW50IiwicGFnZVgiLCJwYWdlWSIsIkhUTUxDYW52YXNFbGVtZW50IiwicHJvdG90eXBlIiwiQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIiwiY2xlYXIiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFdBQ0FDLElBQ0FDLE1BQ0FD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QUFVLEVBQUUsRUFBRXZELEtBQUtBLE1BQ3ZCQyxRQUFVIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBodG1sQ2FudmFzO1xudmFyIGN0eDtcbnZhciB3aW5fbDtcbnZhciB3aW5faDtcbnZhciBzaXplO1xudmFyIHZlY3RvcnM7XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgaHRtbENhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlDYW52YXNcIik7XG4gICAgY3R4ID0gaHRtbENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHZlY3RvcnMgPSBbXTtcbiAgICB3aW5fbCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHdpbl9oID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIHNpemUgPSBNYXRoLm1pbih3aW5faCwgd2luX2wpO1xuXG4gICAgY3R4LmNhbnZhcy53aWR0aCAgPSBzaXplO1xuICAgIGN0eC5jYW52YXMuaGVpZ2h0ID0gc2l6ZTtcblxuICAgIGh0bWxDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKGV2LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICBjdHhFdmVudCgpO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBjdHhFdmVudCgpe1xuICAgIHZhciBjb29yZHMgPSBodG1sQ2FudmFzLnJlbE1vdXNlQ29vcmRzKGV2ZW50KTtcbiAgICB2YXIgcmFkaXVzID0gc2l6ZSAvIDYwO1xuICAgIHZhciByZW1vdmVkID0gZmFsc2U7XG4gICAgdmFyIHRlbXAgPSBudWxsO1xuXG4gICAgbm9kZUV2ZW50SGFuZGxlcihjb29yZHMsIHJhZGl1cywgcmVtb3ZlZCwgdGVtcCk7XG4gICAgXG59XG5cbmZ1bmN0aW9uIG5vZGVFdmVudEhhbmRsZXIoY29vcmRzLCByYWRpdXMsIHJlbW92ZWQsIHRlbXApe1xuXG4gICAgLy9UaGUgY29uZGl0aW9ucyBnbyBhcyBmb2xsb3dzOlxuICAgIC8vMSkgVGhlIGNpcmNsZSBtdXN0IGZpdCBpbiB0aGUgY2FudmFzIChsaW5lcyA0Mi00MylcbiAgICAvLzIpIFRoZSBjaXJjbGUgbXVzdCBub3Qgb3ZlcmxhcCAobGluZXMgNDcpXG4gICAgLy8zKSBJZiB0aGUgY2lyY2xlIGlzIGFscmVhZHkgcHJlc2VudCBkbyBub3QgYWRkLCBidXQgcmVtb3ZlXG5cbiAgICBpZihjb29yZHMueCA+IHJhZGl1cyAmJiBjb29yZHMueCA8IHNpemUgLSByYWRpdXMpe1xuICAgICAgICBpZihjb29yZHMueSA+IHJhZGl1cyAmJiBjb29yZHMueSA8IHNpemUgLSByYWRpdXMpe1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHZlY3RvcnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIHRlbXAgPSB2ZWN0b3JzW2ldO1xuICAgICAgICAgICAgICAgIGlmKHRlbXAgIT0gbnVsbCAmJiB0ZW1wLmlzQ2xpY2tlZChjb29yZHMueCwgY29vcmRzLnkpKXtcbiAgICAgICAgICAgICAgICAgICAgdGVtcC5jbGVhclJlZ2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB2ZWN0b3JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihyZW1vdmVkID09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICB0ZW1wID0gbmV3IE5vZGUoY29vcmRzLngsIGNvb3Jkcy55LCByYWRpdXMsICdncmVlbicsIDEpO1xuICAgICAgICAgICAgICAgIGlmKCF0ZW1wLmlzQ29sbGlzaW9uKHZlY3RvcnMpKXtcbiAgICAgICAgICAgICAgICAgICAgdmVjdG9ycy5wdXNoKHRlbXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vcmVkcmF3IG5vZGVzIGFzIGZvbGxvd3NcbiAgICAvL2lmIHRoZSBoZWFkIHlvdXIgYmx1ZVxuICAgIC8vaWYgdGhlIHRhaWwgeW91ciByZWRcbiAgICAvL2Vsc2UgeW91ciBncmVlblxuXG4gICAgaWYodmVjdG9ycy5sZW5ndGggPiAwKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbMF07XG4gICAgICAgIHRlbXAuY2xlYXJSZWdpb24oKTtcbiAgICAgICAgdmVjdG9yc1swXSA9IG5ldyBOb2RlKHRlbXAueCwgdGVtcC55LCB0ZW1wLnIsICdibHVlJywgMSk7XG4gICAgICAgIHZlY3RvcnNbMF0uZHJhdygpO1xuICAgIH1cblxuICAgIGZvcih2YXIgaSA9IDE7IGkgPCB2ZWN0b3JzLmxlbmd0aCAtIDE7IGkrKyl7XG4gICAgICAgIHRlbXAgPSB2ZWN0b3JzW2ldO1xuICAgICAgICB2ZWN0b3JzW2ldLmNsZWFyUmVnaW9uKCk7XG4gICAgICAgIHZlY3RvcnNbaV0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgdGVtcC5yLCAnZ3JlZW4nLCAxKTtcbiAgICAgICAgdmVjdG9yc1tpXS5kcmF3KCk7XG4gICAgfVxuXG4gICAgaWYodmVjdG9ycy5sZW5ndGggPiAxKXtcbiAgICAgICAgdGVtcCA9IHZlY3RvcnNbdmVjdG9ycy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGVtcC5jbGVhclJlZ2lvbigpO1xuICAgICAgICB2ZWN0b3JzW3ZlY3RvcnMubGVuZ3RoIC0gMV0gPSBuZXcgTm9kZSh0ZW1wLngsIHRlbXAueSwgdGVtcC5yLCAncmVkJywgMSk7XG4gICAgICAgIHZlY3RvcnNbdmVjdG9ycy5sZW5ndGggLSAxXS5kcmF3KCk7XG4gICAgfVxuICAgIFxufVxuXG5mdW5jdGlvbiBFZGdlKGhlYWQsIHRhaWwpe1xuICAgIHRoaXMuaGVhZCA9IGhlYWQ7XG4gICAgdGhpcy50YWlsID0gdGFpbDtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdmVyJztcbiAgICAgICAgY3R4Lm1vdmVUbyhoZWFkLngsIGhlYWQueSk7XG4gICAgICAgIGN0eC5saW5lVG8odGFpbC54LCB0YWlsLnkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTm9kZSh4LCB5LCByLCBmaWxsLCBzdHJva2UpIHtcbiAgICB0aGlzLnN0YXJ0aW5nQW5nbGUgPSAwO1xuICAgIHRoaXMuZW5kQW5nbGUgPSAyICogTWF0aC5QSTtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5yID0gcjtcbiAgICB0aGlzLnJlZ2lvbiA9IHIgKiAyLjI7XG5cbiAgICB0aGlzLmZpbGwgPSBmaWxsO1xuICAgIHRoaXMuc3Ryb2tlID0gc3Ryb2tlO1xuXG4gICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5hcmModGhpcy54LCB0aGlzLnksIHRoaXMuciwgdGhpcy5zdGFydGluZ0FuZ2xlLCB0aGlzLmVuZEFuZ2xlKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuZmlsbDtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuc3Ryb2tlO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhclJlZ2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHguY2xlYXJSZWN0KHRoaXMueCAtICh0aGlzLnJlZ2lvbiAvIDIpLCB0aGlzLnkgLSAodGhpcy5yZWdpb24gLyAyKSwgdGhpcy5yZWdpb24sIHRoaXMucmVnaW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzQ2xpY2tlZCA9IGZ1bmN0aW9uIChpbl94LCBpbl95KSB7XG4gICAgICAgIHZhciBjbGlja2VkID0gZmFsc2U7XG5cbiAgICAgICAgaWYoaW5feCA+ICh4IC0gcikgJiYgaW5feCA8ICh4ICsgcikpe1xuICAgICAgICAgICAgaWYoaW5feSA+ICh5IC0gcikgJiYgaW5feSA8ICh5ICsgcikpe1xuICAgICAgICAgICAgICAgIGNsaWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsaWNrZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5pc0NvbGxpc2lvbiA9IGZ1bmN0aW9uKGFycil7XG4gICAgICAgIHZhciBjbGlja2VkID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGlmKGFycltpXSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICB2YXIgaW5feCA9IGFycltpXS54O1xuICAgICAgICAgICAgICAgIHZhciBpbl95ID0gYXJyW2ldLnk7XG5cbiAgICAgICAgICAgICAgICBpZihpbl94ID4gKHggLSB0aGlzLnJlZ2lvbikgJiYgaW5feCA8ICh4ICsgdGhpcy5yZWdpb24pKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5feSA+ICh5IC0gdGhpcy5yZWdpb24pICYmIGluX3kgPCAoeSArIHRoaXMucmVnaW9uKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGlja2VkO1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWxNb3VzZUNvb3JkcyhldmVudCl7XG4gICAgdmFyIHRvdGFsT2Zmc2V0WCA9IDA7XG4gICAgdmFyIHRvdGFsT2Zmc2V0WSA9IDA7XG4gICAgdmFyIGNhbnZhc1ggPSAwO1xuICAgIHZhciBjYW52YXNZID0gMDtcbiAgICB2YXIgY3VycmVudEVsZW1lbnQgPSB0aGlzO1xuXG4gICAgZG97XG4gICAgICAgIHRvdGFsT2Zmc2V0WCArPSBjdXJyZW50RWxlbWVudC5vZmZzZXRMZWZ0IC0gY3VycmVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICAgICAgdG90YWxPZmZzZXRZICs9IGN1cnJlbnRFbGVtZW50Lm9mZnNldFRvcCAtIGN1cnJlbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICB9XG4gICAgd2hpbGUoY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5vZmZzZXRQYXJlbnQpXG5cbiAgICBjYW52YXNYID0gZXZlbnQucGFnZVggLSB0b3RhbE9mZnNldFg7XG4gICAgY2FudmFzWSA9IGV2ZW50LnBhZ2VZIC0gdG90YWxPZmZzZXRZO1xuXG4gICAgcmV0dXJuIHt4OmNhbnZhc1gsIHk6Y2FudmFzWX1cbn1cbkhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS5yZWxNb3VzZUNvb3JkcyA9IHJlbE1vdXNlQ29vcmRzO1xuXG5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKXtcbiAgICBjdHguY2xlYXJSZWN0KDAsMCxzaXplLHNpemUpO1xuICAgIHZlY3RvcnMgPSBbXTtcbn0iXX0=
